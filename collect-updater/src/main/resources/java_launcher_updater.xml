<component>
    <name>java_launcher</name>
    <description>Java Launcher</description>
    <canBeEdited>0</canBeEdited>
    <selected>1</selected>
    <show>0</show>

    <!-- parameters for creating Java launchers -->
    <parameterList>
        <stringParameter name="java_launcher_destination" value="${installdir}" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_binary_name" value="${project.shortName}-launcher.${platform_exec_suffix}" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_arguments" value="" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_vm_parameters" value="" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_jar" value="" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_mainClass" value="" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_classpath" value="" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_startmenu_shortcut_name" value="Launch ${project.fullName}" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_startmenu_shortcut_icon" value="" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_startmenu_shortcut_windows_icon" value="" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <stringParameter name="java_launcher_osx_icon" value="" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>40</width>
        </stringParameter>
        <booleanParameter name="java_launcher_add_to_win_startmenu" value="1" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
        </booleanParameter>
        <booleanParameter name="java_install_jre" value="1" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
        </booleanParameter>
        <booleanParameter name="java_create_launcher" value="1" ask="0">
            <description></description>
            <explanation></explanation>
            <default></default>
        </booleanParameter>
    </parameterList>
    
    <componentList>
    	<component name="default">
    		<description>Default Component</description>
			<canBeEdited>1</canBeEdited>
			<selected>1</selected>
			<show>1</show>
			
    		<desktopShortcutList>
				<shortcut>
					<name>Open Foris Collect</name>
					<comment>Launch Open Foris Collect</comment>
					<exec>${java_launcher_destination}/${java_launcher_binary_name}</exec>
					<path>${java_launcher_destination}</path>
					<icon>${java_launcher_startmenu_shortcut_icon}</icon>
					<platforms>linux linux-x64</platforms>
					<runAsAdmin>0</runAsAdmin>
					<runInTerminal>0</runInTerminal>
				</shortcut>
			</desktopShortcutList>
    	</component>
    </componentList>
    
    <postInstallationActionList>
        <!-- create Java launcher using preferred JRE -->
        <createJavaLaunchers>
            <destination>${java_launcher_destination}</destination>
            <explanation>${msg(Installer.Java.CreateLaunchers.Explanation)}</explanation>
            <progressText>${msg(Installer.Java.CreateLaunchers.Text)}</progressText>
            <javaLauncherList>
                <javaLauncher>
                    <allowCommandLineArguments>1</allowCommandLineArguments>
                    <arguments>${java_launcher_arguments}</arguments>
                    <binaryName>${java_launcher_binary_name}</binaryName>
                    <classpath>${java_launcher_classpath}</classpath>
                    <jarFile>${java_launcher_jar}</jarFile>
                    <mainClass>${java_launcher_mainClass}</mainClass>
                    <osxApplicationBundleIcon>${java_launcher_osx_icon}</osxApplicationBundleIcon>
                    <preferredJavaBinary>${java_executable}</preferredJavaBinary>
                    <runInBackground>0</runInBackground>
                    <runInConsole>0</runInConsole>
                    <usePropertiesFile>1</usePropertiesFile>
                    <vmParameters>${java_launcher_vm_parameters}</vmParameters>
                    <windowsResourceFileVersion>${project.version}</windowsResourceFileVersion>
                    <workingDirectory>${java_launcher_destination}</workingDirectory>
                </javaLauncher>
            </javaLauncherList>
            <ruleList>
                <isTrue value="${java_create_launcher}"/>
            </ruleList>
        </createJavaLaunchers>

        <!-- create start menu shortcut(s) on Microsoft Windows -->
        <actionGroup>
            <actionList>
                <setInstallerVariable>
                    <name>java_launcher_startmenudirectory</name>
                    <value>${windows_folder_programs}</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>java_launcher_startmenudirectory</name>
                    <value>${windows_folder_common_programs}</value>
                    <ruleList>
                        <compareText logic="does_not_equal" text="${project.installationScope}" value="user"/>
                        <isTrue value="${installer_is_root_install}"/>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>java_launcher_startmenudirectory</name>
                    <value>${java_launcher_startmenudirectory}/${project.startMenuGroupName}</value>
                </setInstallerVariable>
                <createDirectory>
                    <path>${java_launcher_startmenudirectory}</path>
                </createDirectory>
                <createShortcuts>
                    <destination>${java_launcher_startmenudirectory}</destination>
                    <explanation>${msg(Installer.Java.CreateLauncherShortcuts.Explanation)}</explanation>
                    <progressText>${msg(Installer.Java.CreateLauncherShortcuts.Text)}</progressText>
                    <shortcutList>
                        <startMenuShortcut>
                            <comment>${java_launcher_binary_name}</comment>
                            <icon>${java_launcher_startmenu_shortcut_icon}</icon>
                            <name>${java_launcher_startmenu_shortcut_name}</name>
                            <runAsAdmin>0</runAsAdmin>
                            <runInTerminal>0</runInTerminal>
                            <windowsExec>${java_launcher_destination}/${java_launcher_binary_name}</windowsExec>
                            <windowsExecArgs></windowsExecArgs>
                            <windowsIcon>${java_launcher_startmenu_shortcut_windows_icon}</windowsIcon>
                            <windowsPath>${java_launcher_destination}</windowsPath>
                        </startMenuShortcut>
                    </shortcutList>
                </createShortcuts>
            </actionList>
            <ruleList>
                <platformTest type="windows"/>
                <isTrue value="${java_launcher_add_to_win_startmenu}"/>
                <isTrue value="${java_create_launcher}"/>
            </ruleList>
        </actionGroup>
        
        <!-- create launcher shortcut for MacOS -->
        <createSymLink target="${java_launcher_destination}/${java_launcher_binary_name}" 
	        	linkName="~/Desktop/${java_launcher_startmenu_shortcut_name}">
        	<ruleList>
        		<platformTest type="osx" />
        		 <isTrue value="${java_create_launcher}"/>
			</ruleList>
       	</createSymLink>
    </postInstallationActionList>
</component>
